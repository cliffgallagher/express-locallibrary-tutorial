(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],[,,,,,,function(e,t,n){e.exports={popup:"Popup_popup__JHpaf",popup_inner:"Popup_popup_inner__3TRG6",button_div:"Popup_button_div__3EMjM",right_most_button:"Popup_right_most_button__LdIE4",popup_for_delete:"Popup_popup_for_delete__17l25"}},,,function(e,t,n){e.exports={popup:"ElementPopupForUpdate_popup__1HVL0",popupInner:"ElementPopupForUpdate_popupInner__1R4Xz",button_div:"ElementPopupForUpdate_button_div__jCXET",right_most_button:"ElementPopupForUpdate_right_most_button__1umR4"}},function(e,t,n){e.exports={listElement:"ListElement_listElement__GdXgt",hideElement:"ListElement_hideElement__e3u6M",gridOrder:"ListElement_gridOrder__3QNgP"}},function(e,t,n){e.exports={chosen_element_popup:"ChosenElement_chosen_element_popup__QVrpQ",chosen_element_popup_inner:"ChosenElement_chosen_element_popup_inner__2JnSV",button_div:"ChosenElement_button_div__2VNSr",right_most_button:"ChosenElement_right_most_button__1Wbnb"}},function(e,t,n){e.exports={newElementForm:"NewElementForm_newElementForm__3y0ey",newBookSummaryLabel:"NewElementForm_newBookSummaryLabel__1m1Fv",newBookSummaryInput:"NewElementForm_newBookSummaryInput__39OcQ",buttonDiv:"NewElementForm_buttonDiv__3yz50"}},function(e,t,n){e.exports={addElementButtonContainer:"NewElement_addElementButtonContainer__iFzQn",addElementButton:"NewElement_addElementButton__KxBWD"}},function(e,t,n){e.exports={navbarHeader:"NavbarHeader_navbarHeader__1AM8y",fabars:"NavbarHeader_fabars__2bvym",searchDiv:"NavbarHeader_searchDiv__1CzYk",searchDiv_form_input:"NavbarHeader_searchDiv_form_input__1Ns7w",show_search_bar:"NavbarHeader_show_search_bar__3kPMC",fasearchIcon:"NavbarHeader_fasearchIcon__1tdzQ"}},function(e,t,n){e.exports={popup:"NewUserSignup_popup__fO7HL",popup_inner:"NewUserSignup_popup_inner__2dFTB",button_div:"NewUserSignup_button_div__2WyXu",show_password_checkbox:"NewUserSignup_show_password_checkbox__3rTBo"}},function(e,t,n){e.exports={ulGrid:"List_ulGrid__38zOR"}},,function(e,t,n){e.exports={navbar:"NavbarOptions_navbar__3xEI_",displayNavbar:"NavbarOptions_displayNavbar__1gNAK",closeXButton:"NavbarOptions_closeXButton__1TVvj",bottom_div:"NavbarOptions_bottom_div__1zq4m"}},function(e,t,n){e.exports={popup:"Login_popup__2JlJy",popup_inner:"Login_popup_inner__38elY",button_div:"Login_button_div__1reuK"}},,,,function(e,t,n){},,,,function(e,t,n){e.exports={appClass:"App_appClass__2k5S6"}},,,,,,,,,,function(e,t,n){},,,,,,function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),c=n(26),o=n.n(c),s=(n(37),n(5)),i=n(3),u=n(4),l=n.n(u),d=n(27),p=n.n(d),j=n(16),b=n.n(j),h=n(1),O=function(e){return Object(h.jsx)("div",{"data-cy":"booklist",children:Object(h.jsx)("ul",{className:b.a.ulGrid,children:e.bookArray})})},m=n(25),f=n(12),x=n.n(f),_=Object(a.createContext)(),y=function(e){var t=Object(a.useState)([Object(h.jsx)("option",{value:"0",children:"Select Author"},"0")]),n=Object(i.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)([Object(h.jsx)("option",{value:"0",children:"Select Genre"},"0")]),u=Object(i.a)(o,2),d=u[0],p=u[1],j=Object(a.useState)(""),b=Object(i.a)(j,2),O=b[0],f=b[1],y=Object(a.useState)(""),v=Object(i.a)(y,2),g=v[0],k=v[1],w=Object(a.useState)(""),D=Object(i.a)(w,2),N=D[0],C=D[1],S=Object(a.useState)(),E=Object(i.a)(S,2),I=E[0],A=E[1],B=Object(a.useState)(),L=Object(i.a)(B,2),F=L[0],T=L[1],P=Object(a.useState)(),U=Object(i.a)(P,2),G=U[0],z=U[1],H=Object(a.useContext)(_),J=function(){var e=Object(s.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/catalog/authors",{headers:{Authorization:"Bearer ".concat(H.token)}});case 2:return t=e.sent,e.next=5,t.json();case 5:"object"===typeof(n=e.sent)&&"TokenExpiredError"===n.name&&H.setIsLoggedIn(!1),c((function(e){return[].concat(Object(m.a)(e),[n.map((function(e){return Object(h.jsx)("option",{value:e.author_id,children:e.family_name+", "+e.first_name},e.author_id)}))])}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(s.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/catalog/genres",{headers:{Authorization:"Bearer ".concat(H.token)}});case 2:return t=e.sent,e.next=5,t.json();case 5:"object"===typeof(n=e.sent)&&"TokenExpiredError"===n.name&&H.setIsLoggedIn(!1),p((function(e){return[].concat(Object(m.a)(e),[n.map((function(e){return Object(h.jsx)("option",{value:e.genre_id,children:e.name},e.genre_id)}))])}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function q(){return q=Object(s.a)(l.a.mark((function t(n){var a,r,c,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),a={title:O,escapedTitle:O.replaceAll("'","\\'"),author_id:I,summary:N.replaceAll("'","\\'"),isbn:g,genre_id:F},e.newBookInfoToNewBook(a),r=function(){var e=Object(s.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("catalog/book/create/one",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(H.token)},body:JSON.stringify(a)});case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.next=6,r();case 6:"object"===typeof(c=t.sent)&&("TokenExpiredError"===c.name&&H.setIsLoggedIn(!1),c.hasOwnProperty("errors")?(o=c.errors.map((function(e){return e.msg}))).includes("title already in database")?e.isAddingDuplicate():z((function(){return o.map((function(e){return Object(h.jsx)("li",{children:e})}))})):(e.getBookListNewBookToBookForm(),e.onCancel()));case 8:case"end":return t.stop()}}),t)}))),q.apply(this,arguments)}return Object(a.useEffect)((function(){J(),W()}),[]),Object(h.jsxs)("form",{id:x.a.newElementForm,onSubmit:function(e){return q.apply(this,arguments)},"data-cy":"new_book_form",children:[Object(h.jsx)("ul",{children:G}),Object(h.jsxs)("label",{children:["Title",Object(h.jsx)("input",{type:"text",name:"titleField",value:O,onChange:function(e){f(e.target.value)}})]}),Object(h.jsxs)("label",{children:["ISBN",Object(h.jsx)("input",{type:"text",name:"isbnField",value:g,onChange:function(e){k(e.target.value)}})]}),Object(h.jsxs)("label",{id:x.a.newBookSummaryLabel,children:["Summary",Object(h.jsx)("textarea",{id:x.a.newBookSummaryInput,name:"summaryField",value:N,rows:"5",cols:"25",onChange:function(e){C(e.target.value)}})]}),Object(h.jsxs)("label",{children:["Author",Object(h.jsx)("select",{name:"authors",value:I,onChange:function(e){A(e.target.value)},children:r})]}),Object(h.jsxs)("label",{children:["Genre",Object(h.jsx)("select",{name:"genres",value:F,onChange:function(e){T(e.target.value)},children:d})]}),Object(h.jsxs)("div",{id:x.a.buttonDiv,children:[Object(h.jsx)("button",{type:"submit",children:"Submit"}),Object(h.jsx)("button",{onClick:e.onCancel,children:"Cancel"})]})]})},v=n(6),g=n.n(v),k=function(e){var t=Object(a.useContext)(_);function n(){return(n=Object(s.a)(l.a.mark((function n(a){var r,c;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a.preventDefault(),console.log("props.newbookinfo: "+JSON.stringify(e.newBookInfo)),n.next=4,fetch("catalog/book/create/two",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t.token)},body:JSON.stringify(e.newBookInfo)});case 4:r=n.sent,"object"===typeof(c=r.json())&&"TokenExpiredError"===c.name&&t.setIsLoggedIn(!1),e.isNotAddingDuplicate(),e.getBookListNewBookToBookForm(),e.setIsAddingNewBook(!1);case 10:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return Object(h.jsx)("div",{className:g.a.popup,"data-cy":"duplicate_book_warning",children:Object(h.jsx)("div",{className:g.a.popup_inner,children:Object(h.jsxs)("form",{onSubmit:function(e){return n.apply(this,arguments)},children:[Object(h.jsxs)("p",{children:["A book with title '",e.newBookInfo.title,"' already exists in the database. Insert anyway?"]}),Object(h.jsxs)("div",{id:g.a.button_div,children:[Object(h.jsx)("button",{type:"submit",children:"Yes"}),Object(h.jsx)("button",{id:g.a.right_most_button,onClick:function(){e.isNotAddingDuplicate(),e.setIsAddingNewBook(!1)},children:"No"})]})]})})})},w=n(13),D=n.n(w),N=function(e){var t=Object(a.useState)(!1),n=Object(i.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(!1),s=Object(i.a)(o,2),u=s[0],l=s[1],d=Object(a.useState)(),p=Object(i.a)(d,2),j=p[0],b=p[1];return Object(h.jsxs)("div",{children:[!r&&Object(h.jsx)("div",{id:D.a.addElementButtonContainer,children:Object(h.jsx)("button",{id:D.a.addElementButton,onClick:function(e){c(!0)},children:"Add New Book"})}),r&&Object(h.jsx)(y,{onCancel:function(){c(!1)},getBookListNewBookToBookForm:e.getBookListMyComponentNewToNewBook,isAddingDuplicate:function(){l(!0)},newBookInfoToNewBook:function(e){var t=e.title,n=e.escapedTitle,a=e.author_id,r=e.summary,c=e.isbn,o=e.genre_id;b({title:t,escapedTitle:n,author_id:a,summary:r,isbn:c,genre_id:o})}}),u&&Object(h.jsx)("div",{children:Object(h.jsx)(k,{newBookInfo:j,isNotAddingDuplicate:function(){l(!1)},getBookListNewBookToBookForm:e.getBookListMyComponentNewToNewBook,setIsAddingNewBook:c})})]})},C=n(21),S=n(10),E=n.n(S),I=(n(23),function(e){return Object(h.jsxs)("div",{"data-cy":"book_info",children:[Object(h.jsxs)("p",{"data-cy":"book_info_title",children:["Title: ",e.title]}),Object(h.jsxs)("p",{"data-cy":"book_info_author",children:["Author: ",e.author]}),Object(h.jsxs)("p",{"data-cy":"book_info_isbn",children:["ISBN: ",e.isbn]}),Object(h.jsxs)("p",{"data-cy":"book_info_genre",children:["Genre: ",e.genreName]}),Object(h.jsxs)("p",{"data-cy":"book_info_summary",children:["Summary: ",e.summary]})]})}),A=n(11),B=n.n(A),L=function(e){var t=Object(a.useState)(""),n=Object(i.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(""),u=Object(i.a)(o,2),d=u[0],p=u[1],j=Object(a.useState)(""),b=Object(i.a)(j,2),O=b[0],m=b[1],f=Object(a.useContext)(_);function x(){return(x=Object(s.a)(l.a.mark((function t(){var n,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("catalog/book/".concat(e.bookID,"/delete"),{headers:{Authorization:"Bearer ".concat(f.token)}});case 3:return n=t.sent,t.next=6,n.json();case 6:"object"===typeof(a=t.sent)&&"TokenExpiredError"===a.name&&f.setIsLoggedIn(!1),c(a[0].title),p(a[0].isbn),m("".concat(a[0].first_name," ").concat(a[0].family_name)),t.next=15;break;case 13:t.prev=13,t.t0=t.catch(0);case 15:case"end":return t.stop()}}),t,null,[[0,13]])})))).apply(this,arguments)}function y(){return(y=Object(s.a)(l.a.mark((function t(n){var a,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),a={bookIDattribute:e.bookID},t.next=4,fetch("catalog/book/".concat(e.bookID,"/delete"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f.token)},body:JSON.stringify(a)});case 4:return r=t.sent,e.setDisplayElementPopupForDelete(!1),e.setDisplayElement(!1),e.getBookList(),t.abrupt("return",r);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(a.useEffect)((function(){!function(){x.apply(this,arguments)}()}),[]),Object(h.jsx)("div",{className:g.a.popup,children:Object(h.jsx)("div",{className:g.a.popup_inner,children:Object(h.jsxs)("form",{onSubmit:function(e){return y.apply(this,arguments)},id:g.a.popup_for_delete,"data-cy":"book_popup_for_delete",children:[Object(h.jsx)("h2",{children:"Are you sure you want to delete this book?"}),Object(h.jsxs)("h3",{children:["Title: ",r]}),Object(h.jsxs)("h3",{children:["Author: ",O]}),Object(h.jsxs)("h3",{children:["ISBN: ",d]}),Object(h.jsxs)("div",{id:g.a.button_div,children:[Object(h.jsx)("button",{type:"submit",children:"Delete"}),Object(h.jsx)("button",{id:g.a.right_most_button,onClick:function(){e.setDisplayElementPopupForDelete(!1)},children:"Close"})]})]})})})},F=n(9),T=n.n(F),P=function(e){var t=Object(a.useState)([]),n=Object(i.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)([]),u=Object(i.a)(o,2),d=u[0],p=u[1],j=Object(a.useState)(),b=Object(i.a)(j,2),O=b[0],m=b[1],f=Object(a.useState)(),x=Object(i.a)(f,2),y=x[0],v=x[1],g=Object(a.useState)(),k=Object(i.a)(g,2),w=k[0],D=k[1],N=Object(a.useState)(),C=Object(i.a)(N,2),S=C[0],E=C[1],I=Object(a.useState)(),A=Object(i.a)(I,2),B=A[0],L=A[1],F=Object(a.useState)(!1),P=Object(i.a)(F,2),U=P[0],G=P[1],z=Object(a.useState)(),H=Object(i.a)(z,2),J=H[0],W=H[1],q=Object(a.useState)(),M=Object(i.a)(q,2),X=M[0],Q=M[1],Y=Object(a.useContext)(_),K=function(){var e=Object(s.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/catalog/authors",{headers:{Authorization:"Bearer ".concat(Y.token)}});case 3:return t=e.sent,e.next=6,t.json();case 6:"object"===typeof(n=e.sent)&&"TokenExpiredError"===n.name&&Y.setIsLoggedIn(!1),c((function(){return[n.map((function(e){return Object(h.jsx)("option",{value:e.author_id,children:e.family_name+", "+e.first_name},e.author_id)}))]})),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(s.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/catalog/genres",{headers:{Authorization:"Bearer ".concat(Y.token)}});case 2:return t=e.sent,e.next=5,t.json();case 5:"object"===typeof(n=e.sent)&&"TokenExpiredError"===n.name&&Y.setIsLoggedIn(!1),p((function(){return[n.map((function(e){return Object(h.jsx)("option",{value:e.genre_id,children:e.name},e.genre_id)}))]}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function V(){return Z.apply(this,arguments)}function Z(){return(Z=Object(s.a)(l.a.mark((function t(){var n,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("catalog/book/".concat(e.bookID,"/update"),{headers:{Authorization:"Bearer ".concat(Y.token)}});case 3:return n=t.sent,t.next=6,n.json();case 6:"object"===typeof(a=t.sent)&&"TokenExpiredError"===a.name&&Y.setIsLoggedIn(!1),m(a[0].title),v(a[0].isbn),D(a[0].summary),W(a[0].title),t.next=16;break;case 14:t.prev=14,t.t0=t.catch(0);case 16:case"end":return t.stop()}}),t,null,[[0,14]])})))).apply(this,arguments)}var $=function(){var t=Object(s.a)(l.a.mark((function t(n){var a,r,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("catalog/book/".concat(e.bookID,"/update/one"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(Y.token)},body:JSON.stringify(n)});case 2:return a=t.sent,t.next=5,a.json();case 5:if("object"!==typeof(r=t.sent)){t.next=18;break}if("TokenExpiredError"===r.name&&Y.setIsLoggedIn(!1),!r.hasOwnProperty("errors")){t.next=13;break}(c=r.errors.map((function(e){return e.msg}))).includes("title already in database")?G(!0):Q((function(){return c.map((function(e){return Object(h.jsx)("li",{children:e})}))})),t.next=18;break;case 13:return e.getBookList(),e.setDisplayElementPopupForUpdate(!1),e.setDisplayElement(!1),e.setHideElement(!1),t.abrupt("return",a);case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),ee=function(){var t=Object(s.a)(l.a.mark((function t(n){var a,r,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("catalog/book/".concat(e.bookID,"/update/two"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(Y.token)},body:JSON.stringify(n)});case 2:return a=t.sent,t.next=5,a.json();case 5:"object"===typeof(r=t.sent)&&("TokenExpiredError"===r.name&&Y.setIsLoggedIn(!1),r.hasOwnProperty("errors")?(c=r.errors.map((function(e){return e.msg})),Q((function(){return c.map((function(e){return Object(h.jsx)("li",{children:e})}))}))):(e.getBookList(),e.setDisplayElementPopupForUpdate(!1),e.setDisplayElement(!1),e.setHideElement(!1)));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();function te(){return(te=Object(s.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n={title:O,escapedTitle:O.replaceAll("'","\\'"),authorID:S,isbn:y,genreID:B,summary:w.replaceAll("'","\\'")},J===n.title?ee(n):$(n);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)(Object(s.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return V(),t.next=3,K();case 3:return E(e.authorID),t.next=6,R();case 6:L(e.genreID);case 7:case"end":return t.stop()}}),t)}))),[]),Object(h.jsx)("div",{className:T.a.popup,children:Object(h.jsxs)("div",{"data-cy":"book_popup_for_update",children:[!U&&Object(h.jsxs)("form",{className:T.a.popupInner,onSubmit:function(e){return te.apply(this,arguments)},children:[Object(h.jsx)("ul",{children:X}),Object(h.jsxs)("label",{children:["Title",Object(h.jsx)("input",{type:"text",name:"updateFormTitleField",value:O,onChange:function(e){m(e.target.value)},"data-cy":"book_update_title_field"})]}),Object(h.jsxs)("label",{children:["Author",Object(h.jsx)("select",{name:"updateFormAuthorField",value:S,onChange:function(e){E(e.target.value)},"data-cy":"book_update_author_field",children:r})]}),Object(h.jsxs)("label",{children:["ISBN",Object(h.jsx)("input",{type:"text",name:"updateFormISBNField",value:y,onChange:function(e){v(e.target.value)},"data-cy":"book_update_isbn_field"})]}),Object(h.jsxs)("label",{children:["Genre",Object(h.jsx)("select",{name:"updateFormGenreField",value:B,onChange:function(e){L(e.target.value)},"data-cy":"book_update_genre_field",children:d})]}),Object(h.jsxs)("label",{children:["Summary",Object(h.jsx)("textarea",{id:T.a.summary_input,name:"updateFormSummaryField",value:w,rows:"5",cols:"25",onChange:function(e){D(e.target.value)},"data-cy":"book_update_summary_field"})]}),Object(h.jsxs)("div",{id:T.a.button_div,children:[Object(h.jsx)("button",{type:"submit",children:"Update Book"}),Object(h.jsx)("button",{className:"close-button",onClick:function(t){e.setDisplayElementPopupForUpdate(!1)},id:T.a.right_most_button,children:"Close"})]})]}),U&&Object(h.jsxs)("form",{className:T.a.popupInner,onSubmit:function(e){e.preventDefault();var t={title:O,escapedTitle:O.replaceAll("'","\\'"),authorID:S,isbn:y,genreID:B,summary:w};ee(t)},children:[Object(h.jsxs)("p",{children:["A book with the title ",O," already exists in the database. Are you sure you want to update this book to have that title?"]}),Object(h.jsxs)("div",{id:T.a.button_div,children:[Object(h.jsx)("button",{type:"submit",children:"Update"}),Object(h.jsx)("button",{id:T.a.right_most_button,onClick:function(){G(!1),e.setDisplayElementPopupForUpdate(!1)},children:"Cancel"})]})]})]})})},U=function(e){var t=Object(a.useState)(!1),n=Object(i.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(!1),u=Object(i.a)(o,2),d=u[0],p=u[1];function j(){return(j=Object(s.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:setTimeout((function(){e.setDisplayElement(!1),e.setHideElement(!1)}),50);case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(h.jsxs)("div",{children:[!r&&!d&&Object(h.jsx)("div",{className:B.a.chosen_element_popup,children:Object(h.jsxs)("div",{className:B.a.chosen_element_popup_inner,"data-cy":"chosen_book",children:[Object(h.jsx)(I,{title:e.title,author:e.author,isbn:e.isbn,genreName:e.genreName,summary:e.summary}),Object(h.jsxs)("div",{id:B.a.button_div,children:[Object(h.jsx)("button",{onClick:function(){c(!0)},children:"Update"}),Object(h.jsx)("button",{onClick:function(){p(!0)},children:"Delete"}),Object(h.jsx)("button",{onClick:function(){return j.apply(this,arguments)},children:"Cancel"})]})]})}),r&&Object(h.jsx)("div",{children:Object(h.jsx)(P,{bookID:e.bookID,authorID:e.authorID,genreID:e.genreID,setDisplayElementPopupForUpdate:c,getBookList:e.getBookList,setDisplayElement:e.setDisplayElement,setHideElement:e.setHideElement})}),d&&Object(h.jsx)("div",{children:Object(h.jsx)(L,{bookID:e.bookID,authorID:e.authorID,genreID:e.genreID,setDisplayElementPopupForDelete:p,getBookList:e.getBookList,setDisplayElement:e.setDisplayElement,setHideElement:e.setHideElement})})]})},G=function(e){var t=Object(a.useContext)(_),n=Object(a.useState)(!1),r=Object(i.a)(n,2),c=r[0],o=r[1],s=Object(a.useState)(!1),u=Object(i.a)(s,2),l=u[0],d=u[1],p=Object(a.useState)(!1),j=Object(i.a)(p,2),b=j[0],O=j[1];return Object(a.useEffect)((function(){!function(){if(t.searchText)if(t.searchText.length>0){var n=t.searchText.toLowerCase();e.title.toLowerCase().includes(n)||e.author.toLowerCase().includes(n)||e.isbn.toLowerCase().includes(n)||e.genreName.toLowerCase().includes(n)||e.summary.toLowerCase().includes(n)?(o(!1),O(!1)):(o(!0),O(!0))}else o(!1),O(!1);else o(!1),O(!1)}()}),[t.searchText]),Object(h.jsxs)("div",{className:"".concat(E.a.listElement," ").concat(c?E.a.hideElement:""," ").concat(b?E.a.gridOrder:""),onClick:function(){l||(o(!0),d(!0))},"data-cy":"book_list_element",children:[!l&&Object(h.jsx)("div",{children:Object(h.jsx)(I,{title:e.title,author:e.author,isbn:e.isbn,genreName:e.genreName,summary:e.summary})}),l&&Object(h.jsxs)("div",{children:[Object(h.jsx)(I,{title:e.title,author:e.author,isbn:e.isbn,genreName:e.genreName,summary:e.summary}),Object(h.jsx)(U,Object(C.a)({title:e.title,author:e.author,isbn:e.isbn,genreName:e.genreName,summary:e.summary,setDisplayElement:d,setHideElement:o,getBookList:e.getBookList,updateBookButtonClickHandler:function(){e.setDisplayBookPopupForUpdate(!0),e.bookPropsFromBookListElementToBookComponent(e.bookID,e.authorID,e.genreID),o(!0)},bookID:e.bookID,authorID:e.authorID,genreID:e.genreID},"getBookList",e.getBookList))]})]})},z=n(28),H=function(e){var t=Object(a.useState)(!0),n=Object(i.a)(t,2),r=(n[0],n[1],Object(a.useState)()),c=Object(i.a)(r,2),o=c[0],u=c[1],d=Object(a.useState)(!1),p=Object(i.a)(d,2),j=(p[0],p[1]),b=Object(a.useState)(!1),m=Object(i.a)(b,2),f=(m[0],m[1]),x=Object(a.useState)(),y=Object(i.a)(x,2),v=(y[0],y[1]),g=Object(a.useState)(),k=Object(i.a)(g,2),w=(k[0],k[1]),D=Object(a.useState)(),C=Object(i.a)(D,2),S=(C[0],C[1]),E=Object(a.useState)(),I=Object(i.a)(E,2),A=(I[0],I[1],Object(a.useContext)(_));function B(){return L.apply(this,arguments)}function L(){return(L=Object(s.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("catalog/enhanced",{headers:{Authorization:"Bearer ".concat(A.token)}});case 2:return t=e.sent,e.next=5,t.json();case 5:"object"===typeof(n=e.sent)&&"TokenExpiredError"===n.name&&A.setIsLoggedIn(!1),u((function(){return n.map((function(e){return Object(h.jsx)(G,{bookID:e.book_id,title:e.title,authorID:e.author_id,author:"".concat(e.first_name," ").concat(e.family_name),isbn:e.isbn,genreName:e.name,genreID:e.genre_id,summary:e.summary,setDisplayBookPopupForUpdate:j,bookPropsFromBookListElementToBookComponent:F,setDisplayBookPopupForDelete:f,getBookList:B},e.book_id)}))}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e,t,n){v(e),w(t),S(n)}return Object(a.useEffect)((function(){B()}),[]),Object(h.jsxs)("div",{"data-cy":"book_component",children:[Object(h.jsx)(z.a,{children:Object(h.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"})}),Object(h.jsx)(N,{getBookListMyComponentNewToNewBook:B}),Object(h.jsx)(O,{bookArray:o})]})},J=n(7),W=function(e){var t=Object(a.useState)(),n=Object(i.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(),u=Object(i.a)(o,2),d=u[0],p=u[1],j=Object(a.useState)(),b=Object(i.a)(j,2),O=b[0],m=b[1],f=Object(a.useState)(),y=Object(i.a)(f,2),v=y[0],g=y[1],k=Object(a.useState)(),w=Object(i.a)(k,2),D=w[0],N=w[1],C=Object(a.useContext)(_);function S(){return(S=Object(s.a)(l.a.mark((function t(n){var a,c,o,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),N([]),a={first_name:r,family_name:d,dateOfBirth:O},r&&(a=Object(J.a)(Object(J.a)({},a),{},{escaped_first_name:r.replaceAll("'","\\'")})),d&&(a=Object(J.a)(Object(J.a)({},a),{},{escaped_family_name:d.replaceAll("'","\\'")})),v&&(a=Object(J.a)(Object(J.a)({},a),{},{dateOfDeath:v})),e.passNewAuthorInfo(a),t.prev=7,t.next=10,fetch("catalog/author/create/one",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(C.token)},body:JSON.stringify(a)});case 10:return c=t.sent,t.next=13,c.json();case 13:if("object"!==typeof(o=t.sent)){t.next=24;break}if("TokenExpiredError"===o.name&&C.setIsLoggedIn(!1),!o.hasOwnProperty("errors")){t.next=21;break}(s=o.errors.map((function(e){return e.msg}))).includes("author already in database")?e.showDuplicateAuthorWarning(!0):N((function(){return s.map((function(e){return Object(h.jsx)("li",{children:e})}))})),t.next=24;break;case 21:return e.getAuthorList(),e.hideNewAuthorForm(),t.abrupt("return",c);case 24:t.next=28;break;case 26:t.prev=26,t.t0=t.catch(7);case 28:case"end":return t.stop()}}),t,null,[[7,26]])})))).apply(this,arguments)}return Object(h.jsx)("div",{children:Object(h.jsxs)("form",{id:x.a.newElementForm,onSubmit:function(e){return S.apply(this,arguments)},"data-cy":"new_author_form",children:[Object(h.jsx)("ul",{children:D}),Object(h.jsxs)("label",{children:["First Name",Object(h.jsx)("input",{type:"text",name:"newAuthorFormFirstNameInput",onChange:function(e){c(e.target.value)},value:r})]}),Object(h.jsxs)("label",{children:["Family Name",Object(h.jsx)("input",{type:"text",name:"newAuthorFormFamilyNameInput",onChange:function(e){p(e.target.value)},value:d})]}),Object(h.jsxs)("label",{children:["Date of Birth",Object(h.jsx)("input",{type:"date",name:"newAuthorFormBirthInput",onChange:function(e){m(e.target.value)},value:O})]}),Object(h.jsxs)("label",{children:["Date of Death",Object(h.jsx)("input",{type:"date",name:"newAuthorFormDeathInput",onChange:function(e){g(e.target.value)},value:v})]}),Object(h.jsxs)("div",{id:x.a.buttonDiv,children:[Object(h.jsx)("button",{type:"submit",children:"Submit"}),Object(h.jsx)("button",{onClick:function(){e.hideNewAuthorForm()},children:"Cancel"})]})]})})},q=function(e){var t=Object(a.useContext)(_);function n(){return(n=Object(s.a)(l.a.mark((function n(a){var r,c;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a.preventDefault(),n.next=3,fetch("catalog/author/create/two",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t.token)},body:JSON.stringify(e.newAuthorInfoForWarning)});case 3:r=n.sent,"object"===typeof(c=r.json())&&"TokenExpiredError"===c.name&&t.setIsLoggedIn(!1),e.hideDuplicateAuthorWarning(),e.hideNewAuthorForm(),e.getAuthorList();case 9:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return Object(h.jsx)("div",{className:g.a.popup,children:Object(h.jsx)("div",{className:g.a.popup_inner,children:Object(h.jsxs)("form",{onSubmit:function(e){return n.apply(this,arguments)},children:[Object(h.jsxs)("p",{children:["An author named ","".concat(e.newAuthorInfoForWarning.first_name," ").concat(e.newAuthorInfoForWarning.family_name)," is already in the database."]}),Object(h.jsx)("p",{children:"Do you still wish to create this author?"}),Object(h.jsxs)("div",{id:g.a.button_div,children:[Object(h.jsx)("button",{type:"submit",children:"Yes"}),Object(h.jsx)("button",{className:"close-button",id:g.a.right_most_button,onClick:function(){e.hideDuplicateAuthorWarning(),e.hideNewAuthorForm()},children:"No"})]})]})})})},M=function(e){var t=Object(a.useState)(!1),n=Object(i.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(!1),s=Object(i.a)(o,2),u=s[0],l=s[1],d=Object(a.useState)(),p=Object(i.a)(d,2),j=p[0],b=p[1];function O(){c(!1)}function m(){l(!0)}return Object(h.jsxs)("div",{children:[!r&&!u&&Object(h.jsx)("div",{id:D.a.addElementButtonContainer,children:Object(h.jsx)("button",{id:D.a.addElementButton,onClick:function(){c(!0)},children:"Add New Author"})}),r&&Object(h.jsx)(W,{hideNewAuthorForm:O,getAuthorList:e.getAuthorList,showDuplicateAuthorWarning:m,passNewAuthorInfo:function(e){b(e)}}),u&&Object(h.jsx)("div",{children:Object(h.jsx)(q,{hideDuplicateAuthorWarning:function(){l(!1)},showDuplicateAuthorWarning:m,newAuthorInfoForWarning:j,getAuthorList:e.getAuthorList,hideNewAuthorForm:O})})]})},X=function(e){return Object(h.jsx)("div",{children:Object(h.jsx)("ul",{className:b.a.ulGrid,"data-cy":"author_list",children:e.authorArray})})},Q=function(e){return Object(h.jsxs)("div",{"data-cy":"author_info",children:[Object(h.jsx)("p",{"data-cy":"author_info_name_field",children:"".concat(e.familyName,", ").concat(e.firstName)}),Object(h.jsxs)("p",{"data-cy":"author_info_birth_date",children:["Born: ","".concat(e.dateOfBirth.slice(5,7),"-").concat(e.dateOfBirth.slice(8,10),"-").concat(e.dateOfBirth.slice(0,4))]}),Object(h.jsxs)("p",{"data-cy":"author_info_death_date",children:["Died: ",e.dateOfDeath&&"".concat(e.dateOfDeath.slice(5,7),"-").concat(e.dateOfDeath.slice(8,10),"-").concat(e.dateOfDeath.slice(0,4))]})]})},Y=function(e){var t=Object(a.useState)(),n=Object(i.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(),u=Object(i.a)(o,2),d=u[0],p=u[1],j=Object(a.useState)(),b=Object(i.a)(j,2),O=b[0],m=b[1],f=Object(a.useState)(),x=Object(i.a)(f,2),y=x[0],v=x[1],g=Object(a.useState)(!1),k=Object(i.a)(g,2),w=k[0],D=k[1],N=Object(a.useState)(),C=Object(i.a)(N,2),S=C[0],E=C[1],I=Object(a.useState)(),A=Object(i.a)(I,2),B=A[0],L=A[1],F=Object(a.useState)(),P=Object(i.a)(F,2),U=P[0],G=P[1],z=Object(a.useContext)(_);function H(){return(H=Object(s.a)(l.a.mark((function t(){var n,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("catalog/author/".concat(e.authorID,"/update"),{headers:{Authorization:"Bearer ".concat(z.token)}});case 3:return n=t.sent,t.next=6,n.json();case 6:"object"===typeof(a=t.sent)&&"TokenExpiredError"===a.name&&z.setIsLoggedIn(!1),c(a[0].first_name),p(a[0].family_name),m(a[0].date_of_birth.slice(0,10)),a[0].date_of_death&&v(a[0].date_of_death.slice(0,10)),E(a[0].first_name),L(a[0].family_name),t.next=18;break;case 16:t.prev=16,t.t0=t.catch(0);case 18:case"end":return t.stop()}}),t,null,[[0,16]])})))).apply(this,arguments)}var W=function(){var t=Object(s.a)(l.a.mark((function t(n){var a,r,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("catalog/author/".concat(e.authorID,"/update/one"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(z.token)},body:JSON.stringify(n)});case 3:return a=t.sent,t.next=6,a.json();case 6:if("object"!==typeof(r=t.sent)){t.next=19;break}if("TokenExpiredError"===r.name&&z.setIsLoggedIn(!1),!r.hasOwnProperty("errors")){t.next=14;break}(c=r.errors.map((function(e){return e.msg}))).includes("author already in database")?D(!0):G((function(){return c.map((function(e){return Object(h.jsx)("li",{children:e})}))})),t.next=19;break;case 14:return e.setDisplayAuthorPopupForUpdate(!1),e.setDisplayChosenElement(!1),e.setHideChosenElement(!1),e.getAuthorList(),t.abrupt("return",a);case 19:t.next=23;break;case 21:t.prev=21,t.t0=t.catch(0);case 23:case"end":return t.stop()}}),t,null,[[0,21]])})));return function(e){return t.apply(this,arguments)}}(),q=function(){var t=Object(s.a)(l.a.mark((function t(n){var a,r,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("catalog/author/".concat(e.authorID,"/update/two"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(z.token)},body:JSON.stringify(n)});case 3:return a=t.sent,t.next=6,a.json();case 6:"object"===typeof(r=t.sent)&&("TokenExpiredError"===r.name&&z.setIsLoggedIn(!1),r.hasOwnProperty("errors")?(c=r.errors.map((function(e){return e.msg})),G((function(){return c.map((function(e){return Object(h.jsx)("li",{children:e})}))}))):(D(!1),e.setDisplayAuthorPopupForUpdate(!1),e.setDisplayChosenElement(!1),e.setHideChosenElement(!1),e.getAuthorList())),t.next=12;break;case 10:t.prev=10,t.t0=t.catch(0);case 12:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}();function M(){return(M=Object(s.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n={first_name:r,escaped_first_name:r.replaceAll("'","\\'"),family_name:d,escaped_family_name:d.replaceAll("'","\\'"),birthDate:O},y&&(n=Object(J.a)(Object(J.a)({},n),{},{deathDate:y})),S===n.first_name&&B===n.family_name?q(n):W(n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(){return(X=Object(s.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n={first_name:r,escaped_first_name:r.replaceAll("'","\\'"),family_name:d,escaped_family_name:d.replaceAll("'","\\'"),birthDate:O,deathDate:y},q(n);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){!function(){H.apply(this,arguments)}()}),[]),Object(h.jsx)("div",{className:T.a.popup,children:Object(h.jsxs)("div",{className:T.a.popupInner,"data-cy":"author_popup_for_update",children:[!w&&Object(h.jsxs)("form",{onSubmit:function(e){return M.apply(this,arguments)},children:[Object(h.jsx)("ul",{children:U}),Object(h.jsxs)("label",{children:["First Name",Object(h.jsx)("input",{type:"text",name:"authorUpdateFormFirstNameInput",value:r,onChange:function(e){c(e.target.value)},"data-cy":"author_update_first_name"})]}),Object(h.jsxs)("label",{children:["Family Name",Object(h.jsx)("input",{type:"text",name:"authorUpdateFormFamilyNameInput",value:d,onChange:function(e){p(e.target.value)},"data-cy":"author_update_family_name"})]}),Object(h.jsxs)("label",{children:["Date of Birth",Object(h.jsx)("input",{type:"date",name:"authorUpdateFormBirthInput",value:O,onChange:function(e){m(e.target.value)},"data-cy":"author_update_date_of_birth"})]}),Object(h.jsxs)("label",{children:["Date of Death",Object(h.jsx)("input",{type:"date",name:"authorUpdateFormDeathInput",value:y,onChange:function(e){v(e.target.value)},"data-cy":"author_update_date_of_death"})]}),Object(h.jsxs)("div",{id:T.a.button_div,children:[Object(h.jsx)("button",{type:"submit",children:"Update Author"}),Object(h.jsx)("button",{className:"close-button",id:T.a.right_most_button,onClick:function(){e.setDisplayAuthorPopupForUpdate(!1)},children:"Close"})]})]}),w&&Object(h.jsxs)("form",{onSubmit:function(e){return X.apply(this,arguments)},children:[Object(h.jsxs)("p",{children:["An author named ","".concat(r," ").concat(d)," already exists in the database. Are you sure you want to update this author to have that name?"]}),Object(h.jsxs)("div",{id:T.a.button_div,children:[Object(h.jsx)("button",{type:"submit",children:"Update"}),Object(h.jsx)("button",{id:T.a.right_most_button,onClick:function(){D(!1),e.setDisplayAuthorPopupForUpdate(!1)},children:"Cancel"})]})]})]})})},K=function(e){var t=Object(a.useState)(),n=Object(i.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(),u=Object(i.a)(o,2),d=u[0],p=u[1],j=Object(a.useState)(),b=Object(i.a)(j,2),O=b[0],m=b[1],f=Object(a.useState)(!1),x=Object(i.a)(f,2),y=x[0],v=x[1],k=Object(a.useState)(),w=Object(i.a)(k,2),D=(w[0],w[1]),N=Object(a.useContext)(_);function C(){return(C=Object(s.a)(l.a.mark((function t(){var n,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("catalog/author/".concat(e.authorID,"/delete"),{headers:{Authorization:"Bearer ".concat(N.token)}});case 3:return n=t.sent,t.next=6,n.json();case 6:"object"===typeof(a=t.sent)&&"TokenExpiredError"===a.name&&N.setIsLoggedIn(!1),c("".concat(a[0].first_name," ").concat(a[0].family_name)),p("".concat(a[0].date_of_birth.slice(5,7),"-").concat(a[0].date_of_birth.slice(8,10),"-").concat(a[0].date_of_birth.slice(0,4))),a[0].date_of_death&&m("".concat(a[0].date_of_death.slice(5,7),"-").concat(a[0].date_of_death.slice(8,10),"-").concat(a[0].date_of_death.slice(0,4))),t.next=15;break;case 13:t.prev=13,t.t0=t.catch(0);case 15:case"end":return t.stop()}}),t,null,[[0,13]])})))).apply(this,arguments)}function S(){return(S=Object(s.a)(l.a.mark((function t(n){var a,r,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,t.next=4,fetch("catalog/author/".concat(e.authorID,"/delete"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(N.token)}});case 4:return a=t.sent,t.next=7,a.json();case 7:"TokenExpiredError"===(r=t.sent).name&&N.setIsLoggedIn(!1),r.hasOwnProperty("errors")?(c=r.errors.map((function(e){return e.msg}))).includes("SequelizeForeignKeyConstraintError")?v(!0):D((function(){return c.map((function(e){return Object(h.jsx)("li",{children:e})}))})):(e.setDisplayElementPopupForDelete(!1),e.setDisplayChosenElement(!1),e.getAuthorList()),t.next=14;break;case 12:t.prev=12,t.t0=t.catch(1);case 14:case"end":return t.stop()}}),t,null,[[1,12]])})))).apply(this,arguments)}return Object(a.useEffect)((function(){!function(){C.apply(this,arguments)}()}),[]),Object(h.jsx)("div",{className:g.a.popup,children:Object(h.jsxs)("div",{className:g.a.popup_inner,id:g.a.popup_for_delete,"data-cy":"author_popup_for_delete",children:[!y&&Object(h.jsxs)("form",{onSubmit:function(e){return S.apply(this,arguments)},children:[Object(h.jsx)("h2",{children:"Are you sure you want to delete this author?"}),Object(h.jsxs)("h3",{children:["Name: ",r]}),Object(h.jsxs)("h3",{children:["Date of Birth: ",d]}),Object(h.jsxs)("h3",{children:["Died: ",O]}),Object(h.jsxs)("div",{id:g.a.button_div,children:[Object(h.jsx)("button",{type:"submit",children:"Delete Author"}),Object(h.jsx)("button",{className:"close-button",id:g.a.right_most_button,onClick:function(){e.setDisplayElementPopupForDelete(!1)},children:"Close"})]})]}),y&&Object(h.jsxs)("form",{children:[Object(h.jsx)("h3",{children:"You're attempting to delete an author who wrote a book currently stored in the database."}),Object(h.jsx)("h3",{children:"Please delete the book or update it with a different author before deleting this author."}),Object(h.jsx)("div",{id:g.a.button_div,children:Object(h.jsx)("button",{onClick:function(t){t.preventDefault(),e.setDisplayElementPopupForDelete(!1),v(!1)},children:"Close"})})]})]})})},R=function(e){var t=Object(a.useState)(!1),n=Object(i.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(!1),s=Object(i.a)(o,2),u=s[0],l=s[1];return Object(h.jsxs)("div",{children:[!r&&!u&&Object(h.jsx)("div",{className:B.a.chosen_element_popup,children:Object(h.jsxs)("div",{className:B.a.chosen_element_popup_inner,children:[Object(h.jsx)(Q,{firstName:e.firstName,familyName:e.familyName,dateOfBirth:e.dateOfBirth,dateOfDeath:e.dateOfDeath}),Object(h.jsxs)("div",{id:B.a.button_div,children:[Object(h.jsx)("button",{onClick:function(){c(!0)},children:"Update"}),Object(h.jsx)("button",{onClick:function(){l(!0)},children:"Delete"}),Object(h.jsx)("button",{onClick:function(){setTimeout((function(){e.setDisplayChosenElement(!1),e.setHideChosenElement(!1)}),50)},children:"Cancel"})]})]})}),r&&Object(h.jsx)(Y,{setDisplayAuthorPopupForUpdate:c,authorID:e.authorIDForPopupForUpdate,getAuthorList:e.getAuthorList,setDisplayChosenElement:e.setDisplayChosenElement,setHideChosenElement:e.setHideChosenElement}),u&&Object(h.jsx)(K,{setDisplayElementPopupForDelete:l,authorID:e.authorIDForPopupForUpdate,getAuthorList:e.getAuthorList,setDisplayChosenElement:e.setDisplayChosenElement})]})},V=function(e){var t=Object(a.useState)(!1),n=Object(i.a)(t,2),r=(n[0],n[1],Object(a.useState)(!1)),c=Object(i.a)(r,2),o=c[0],s=c[1],u=Object(a.useState)(!1),l=Object(i.a)(u,2),d=l[0],p=l[1],j=Object(a.useState)(!1),b=Object(i.a)(j,2),O=b[0],m=b[1],f=Object(a.useContext)(_);return Object(a.useEffect)((function(){!function(){if(f.searchText)if(f.searchText.length>0){var t=f.searchText.toLowerCase(),n=e.dateOfBirth.slice(5,10)+"-"+e.dateOfBirth.slice(0,4),a=e.firstName+" "+e.familyName,r=e.familyName+", "+e.firstName,c=e.familyName+" "+e.firstName;e.firstName.toLowerCase().includes(t)||e.familyName.toLowerCase().includes(t)||n.includes(t)||a.toLowerCase().includes(t)||r.toLowerCase().includes(t)||c.toLowerCase().includes(t)||e.dateOfDeath&&(e.dateOfDeath.slice(5,10)+"-"+e.dateOfDeath.slice(0,4)).includes(t)?(s(!1),m(!1)):(s(!0),m(!0))}else s(!1),m(!1);else s(!1),m(!1)}()}),[f.searchText]),Object(h.jsxs)("div",{className:"".concat(E.a.listElement," ").concat(o?E.a.hideElement:""," ").concat(O?E.a.gridOrder:""),onClick:function(){d||(p(!0),s(!0))},"data-cy":"author_list_element",children:[!d&&Object(h.jsx)("div",{children:Object(h.jsx)(Q,{firstName:e.firstName,familyName:e.familyName,dateOfBirth:e.dateOfBirth,dateOfDeath:e.dateOfDeath})}),d&&Object(h.jsxs)("div",{children:[Object(h.jsx)(Q,{firstName:e.firstName,familyName:e.familyName,dateOfBirth:e.dateOfBirth,dateOfDeath:e.dateOfDeath}),Object(h.jsx)(R,{firstName:e.firstName,familyName:e.familyName,dateOfBirth:e.dateOfBirth,dateOfDeath:e.dateOfDeath,setDisplayChosenElement:p,setHideChosenElement:s,getAuthorList:e.getAuthorList,authorIDForPopupForUpdate:e.authorID})]})]})},Z=function(){var e=Object(a.useState)(!0),t=Object(i.a)(e,2),n=(t[0],t[1]),r=Object(a.useState)(),c=Object(i.a)(r,2),o=c[0],u=c[1],d=Object(a.useState)(!1),p=Object(i.a)(d,2),j=(p[0],p[1]),b=Object(a.useState)(),O=Object(i.a)(b,2),m=(O[0],O[1]),f=Object(a.useState)(!1),x=Object(i.a)(f,2),y=(x[0],x[1]),v=Object(a.useContext)(_);function g(){return k.apply(this,arguments)}function k(){return(k=Object(s.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("catalog/authors",{headers:{Authorization:"Bearer ".concat(v.token)}});case 3:return t=e.sent,e.next=6,t.json();case 6:"object"===typeof(a=e.sent)&&"TokenExpiredError"===a.name&&v.setIsLoggedIn(!1),u((function(){return a.map((function(e){return Object(h.jsx)(V,{authorID:e.author_id,firstName:e.first_name,familyName:e.family_name,dateOfBirth:e.date_of_birth,dateOfDeath:e.date_of_death,setDisplayAuthorPopupForUpdate:j,authorInfoToAuthorComponent:w,setDisplayAuthorPopupForDelete:y,setDisplayAuthors:n,getAuthorList:g},e.author_id)}))})),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function w(e){m(e)}return Object(a.useEffect)((function(){g()}),[]),Object(h.jsxs)("div",{"data-cy":"author_component",children:[Object(h.jsx)(M,{getAuthorList:g}),Object(h.jsx)(X,{authorArray:o})]})},$=function(e){var t=Object(a.useState)(),n=Object(i.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(),u=Object(i.a)(o,2),d=u[0],p=u[1],j=Object(a.useContext)(_);var b=function(){var t=Object(s.a)(l.a.mark((function t(n){var a,c,o,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),a={genreName:r},r&&(a=Object(J.a)(Object(J.a)({},a),{},{escapedGenreName:r.replaceAll("'","\\'")})),console.log(JSON.stringify(a)),e.sendGenreNameUp(a.genreName),t.next=7,fetch("catalog/genre/create",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(j.token)},body:JSON.stringify(a)});case 7:return c=t.sent,t.next=10,c.json();case 10:return"object"===typeof(o=t.sent)&&("TokenExpiredError"===o.name&&j.setIsLoggedIn(!1),o.hasOwnProperty("errors")?(s=o.errors.map((function(e){return e.msg}))).includes("SequelizeUniqueConstraintError")?(e.setAddNewGenre(!1),e.setAddingDuplicateGenre(!0)):p((function(){return s.map((function(e){return Object(h.jsx)("li",{children:e})}))})):(e.setAddNewGenre(!1),e.getGenreList())),t.abrupt("return",o);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(h.jsx)("div",{children:Object(h.jsxs)("form",{id:x.a.newElementForm,onSubmit:b,"data-cy":"new_genre_form",children:[Object(h.jsx)("ul",{children:d}),Object(h.jsxs)("label",{children:["New Genre Name",Object(h.jsx)("input",{type:"text",name:"newGenreFormNameField",value:r,onChange:function(e){c(e.target.value)}})]}),Object(h.jsxs)("div",{id:x.a.buttonDiv,children:[Object(h.jsx)("button",{type:"submit",children:"Submit Genre"}),Object(h.jsx)("button",{onClick:function(){e.setAddNewGenre(!1)},children:"Cancel"})]})]})})},ee=function(e){return Object(h.jsx)("div",{className:g.a.popup,children:Object(h.jsx)("div",{className:g.a.popup_inner,children:Object(h.jsxs)("form",{"data-cy":"duplicate_genre_form",children:[Object(h.jsxs)("p",{children:["A genre named ",e.duplicateGenreName," already exists in the database"]}),Object(h.jsx)("div",{id:g.a.button_div,children:Object(h.jsx)("button",{onClick:function(t){t.preventDefault(),e.setAddingDuplicateGenre(!1)},children:"Close"})})]})})})},te=function(e){var t=Object(a.useState)(!1),n=Object(i.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(!1),s=Object(i.a)(o,2),u=s[0],l=s[1],d=Object(a.useState)(),p=Object(i.a)(d,2),j=p[0],b=p[1];return Object(h.jsxs)("div",{children:[!r&&!u&&Object(h.jsx)("div",{id:D.a.addElementButtonContainer,children:Object(h.jsx)("button",{id:D.a.addElementButton,onClick:function(){c(!0)},children:"Add New Genre"})}),r&&!u&&Object(h.jsx)("div",{children:Object(h.jsx)($,{setAddNewGenre:c,getGenreList:e.getGenreList,setAddingDuplicateGenre:l,sendGenreNameUp:function(e){b(e)}})}),!r&&u&&Object(h.jsxs)("div",{children:[Object(h.jsx)($,{setAddNewGenre:c,getGenreList:e.getGenreList,setAddingDuplicateGenre:l}),Object(h.jsx)(ee,{setAddingDuplicateGenre:l,duplicateGenreName:j})]})]})},ne=function(e){return Object(h.jsx)("div",{"data-cy":"genre_list",children:Object(h.jsx)("ul",{className:b.a.ulGrid,children:e.genreArray})})},ae=function(e){return Object(h.jsx)("div",{children:Object(h.jsx)("p",{"data-cy":"genre_info_name_field",children:e.genreName})})},re=function(e){var t=Object(a.useState)(),n=Object(i.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(!1),u=Object(i.a)(o,2),d=u[0],p=u[1],j=Object(a.useState)(),b=Object(i.a)(j,2),O=b[0],m=b[1],f=Object(a.useContext)(_);function x(){return(x=Object(s.a)(l.a.mark((function t(){var n,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("catalog/genre/".concat(e.genreID,"/update"),{headers:{Authorization:"Bearer ".concat(f.token)}});case 3:return n=t.sent,t.next=6,n.json();case 6:"object"===typeof(a=t.sent)&&"TokenExpiredError"===a.name&&f.setIsLoggedIn(!1),c(a[0].name),t.next=13;break;case 11:t.prev=11,t.t0=t.catch(0);case 13:case"end":return t.stop()}}),t,null,[[0,11]])})))).apply(this,arguments)}function y(){return(y=Object(s.a)(l.a.mark((function t(n){var a,c,o,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),a={genreName:r,escapedGenreName:r.replaceAll("'","\\'")},t.prev=2,t.next=5,fetch("catalog/genre/".concat(e.genreID,"/update"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f.token)},body:JSON.stringify(a)});case 5:return c=t.sent,t.next=8,c.json();case 8:"object"===typeof(o=t.sent)&&("TokenExpiredError"===o.name&&f.setIsLoggedIn(!1),o.hasOwnProperty("errors")?(s=o.errors.map((function(e){return e.msg}))).includes("SequelizeUniqueConstraintError")?p(!0):m((function(){return s.map((function(e){return Object(h.jsx)("li",{children:e})}))})):(e.setDisplayElementPopupForUpdate(!1),e.setDisplayChosenElement(!1),e.setHideChosenElement(!1),e.getGenreList())),t.next=14;break;case 12:t.prev=12,t.t0=t.catch(2);case 14:case"end":return t.stop()}}),t,null,[[2,12]])})))).apply(this,arguments)}return Object(a.useEffect)((function(){!function(){x.apply(this,arguments)}()}),[]),Object(h.jsx)("div",{className:T.a.popup,children:Object(h.jsxs)("div",{className:T.a.popupInner,"data-cy":"genre_popup_for_update",children:[!d&&Object(h.jsxs)("form",{onSubmit:function(e){return y.apply(this,arguments)},children:[Object(h.jsx)("ul",{children:O}),Object(h.jsxs)("label",{children:["Genre Name",Object(h.jsx)("input",{type:"text",name:"genreUpdateFormNameField",value:r,onChange:function(e){c(e.target.value)}})]}),Object(h.jsxs)("div",{id:T.a.button_div,children:[Object(h.jsx)("button",{type:"submit",children:"Update"}),Object(h.jsx)("button",{onClick:function(){e.setDisplayElementPopupForUpdate(!1)},id:T.a.right_most_button,children:"Cancel"})]})]}),d&&Object(h.jsxs)("form",{children:[Object(h.jsxs)("p",{children:["Genre name ",r," already exists in the database."]}),Object(h.jsx)("div",{id:T.a.button_div,children:Object(h.jsx)("button",{onClick:function(){p(!1),e.setDisplayElementPopupForUpdate(!1)},children:"Close"})})]})]})})},ce=function(e){var t=Object(a.useState)(),n=Object(i.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(!1),u=Object(i.a)(o,2),d=u[0],p=u[1],j=Object(a.useState)(),b=Object(i.a)(j,2),O=(b[0],b[1]),m=Object(a.useContext)(_);function f(){return(f=Object(s.a)(l.a.mark((function t(){var n,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("catalog/genre/".concat(e.genreID,"/delete"),{headers:{Authorization:"Bearer ".concat(m.token)}});case 3:return n=t.sent,t.next=6,n.json();case 6:"object"===typeof(a=t.sent)&&"TokenExpiredError"===a.name&&m.setIsLoggedIn(!1),c(a[0].name),t.next=13;break;case 11:t.prev=11,t.t0=t.catch(0);case 13:case"end":return t.stop()}}),t,null,[[0,11]])})))).apply(this,arguments)}function x(){return(x=Object(s.a)(l.a.mark((function t(n){var a,r,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,fetch("catalog/genre/".concat(e.genreID,"/delete"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(m.token)}});case 3:return a=t.sent,t.next=6,a.json();case 6:"TokenExpiredError"===(r=t.sent).name&&m.setIsLoggedIn(!1),r.hasOwnProperty("errors")?(c=r.errors.map((function(e){return e.msg}))).includes("SequelizeForeignKeyConstraintError")?p(!0):O((function(){return c.map((function(e){return Object(h.jsx)("li",{children:e})}))})):(e.setDisplayElementPopupForDelete(!1),e.setDisplayChosenElement(!1),e.setHideChosenElement(!1),e.getGenreList());case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(a.useEffect)((function(){!function(){f.apply(this,arguments)}()}),[]),Object(h.jsx)("div",{className:g.a.popup,children:Object(h.jsxs)("div",{className:g.a.popup_inner,id:g.a.popup_for_delete,"data-cy":"genre_popup_for_delete",children:[!d&&Object(h.jsxs)("form",{onSubmit:function(e){return x.apply(this,arguments)},children:[Object(h.jsx)("h2",{children:"Are you sure you wish to delete this genre?"}),Object(h.jsx)("h3",{children:r}),Object(h.jsxs)("div",{id:g.a.button_div,children:[Object(h.jsx)("button",{type:"submit",children:"Delete"}),Object(h.jsx)("button",{onClick:function(){e.setDisplayElementPopupForDelete(!1)},id:g.a.right_most_button,children:"Cancel"})]})]}),d&&Object(h.jsxs)("form",{children:[Object(h.jsx)("h3",{children:"You're attempting to delete the genre of a book currently stored in the database."}),Object(h.jsx)("h3",{children:"Please delete the book or update it with a different genre before deleting this genre."}),Object(h.jsx)("div",{id:g.a.button_div,children:Object(h.jsx)("button",{onClick:function(){p(!1),e.setDisplayElementPopupForDelete(!1)},children:"Close"})})]})]})})},oe=function(e){var t=Object(a.useState)(!1),n=Object(i.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(!1),s=Object(i.a)(o,2),u=s[0],l=s[1];return Object(h.jsxs)("div",{children:[!u&&!r&&Object(h.jsx)("div",{className:B.a.chosen_element_popup,children:Object(h.jsxs)("div",{className:B.a.chosen_element_popup_inner,children:[Object(h.jsx)(ae,{genreName:e.genreName}),Object(h.jsxs)("div",{id:B.a.button_div,children:[Object(h.jsx)("button",{onClick:function(){l(!0)},children:"Update"}),Object(h.jsx)("button",{onClick:function(){c(!0)},children:"Delete"}),Object(h.jsx)("button",{onClick:function(){setTimeout((function(){e.setHideChosenElement(!1),e.setDisplayChosenElement(!1)}),50)},children:"Cancel"})]})]})}),u&&Object(h.jsx)("div",{children:Object(h.jsx)(re,{setDisplayElementPopupForUpdate:l,genreID:e.genreID,getGenreList:e.getGenreList,setHideChosenElement:e.setHideChosenElement,setDisplayChosenElement:e.setDisplayChosenElement})}),r&&Object(h.jsx)("div",{children:Object(h.jsx)(ce,{genreID:e.genreID,getGenreList:e.getGenreList,setDisplayElementPopupForDelete:c,setHideChosenElement:e.setHideChosenElement,setDisplayChosenElement:e.setDisplayChosenElement})})]})},se=function(e){var t=Object(a.useState)(!1),n=Object(i.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(!1),s=Object(i.a)(o,2),u=s[0],l=s[1],d=Object(a.useState)(),p=Object(i.a)(d,2),j=p[0],b=p[1],O=Object(a.useContext)(_);return Object(a.useEffect)((function(){!function(){if(O.searchText)if(O.searchText.length>0){var t=O.searchText.toLowerCase();e.genreName.toLowerCase().includes(t)?(l(!1),b(!1)):(l(!0),b(!0))}else l(!1),b(!1);else l(!1),b(!1)}()}),[O.searchText]),Object(h.jsxs)("div",{className:"".concat(E.a.listElement," ").concat(u?E.a.hideElement:""," ").concat(j?E.a.gridOrder:""),onClick:function(){c(!0),l(!0)},children:[!r&&Object(h.jsx)(ae,{genreName:e.genreName}),r&&Object(h.jsxs)("div",{children:[Object(h.jsx)(ae,{genreName:e.genreName}),Object(h.jsx)(oe,{genreName:e.genreName,setDisplayChosenElement:c,setHideChosenElement:l,genreID:e.genreID,getGenreList:e.getGenreList})]})]})},ie=function(){var e=Object(a.useState)(),t=Object(i.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(!1),o=Object(i.a)(c,2),u=o[0],d=o[1],p=Object(a.useState)(),j=Object(i.a)(p,2),b=j[0],O=j[1],m=Object(a.useState)(!1),f=Object(i.a)(m,2),x=f[0],y=f[1],v=Object(a.useContext)(_);function g(){return k.apply(this,arguments)}function k(){return(k=Object(s.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("catalog/genres",{headers:{Authorization:"Bearer ".concat(v.token)}});case 2:return t=e.sent,e.next=5,t.json();case 5:"object"===typeof(n=e.sent)&&"TokenExpiredError"===n.name&&v.setIsLoggedIn(!1),r((function(){return n.map((function(e){return Object(h.jsx)(se,{genreID:e.genre_id,genreName:e.name,setDisplayGenrePopupForUpdate:d,receiveGenreID:w,setDisplayGenrePopupForDelete:y,getGenreList:g},e.genre_id)}))}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){O(e)}return Object(a.useEffect)((function(){g()}),[]),Object(h.jsxs)("div",{"data-cy":"genre_component",children:[!u&&!x&&Object(h.jsxs)("div",{children:[Object(h.jsx)(te,{getGenreList:g}),Object(h.jsx)(ne,{genreArray:n})]}),u&&Object(h.jsxs)("div",{children:[Object(h.jsx)(te,{getGenreList:g}),Object(h.jsx)(ne,{genreArray:n}),Object(h.jsx)(re,{setDisplayGenrePopupForUpdate:d,genreID:b,getGenreList:g})]}),x&&Object(h.jsxs)("div",{children:[Object(h.jsx)(te,{getGenreList:g}),Object(h.jsx)(ne,{genreArray:n}),Object(h.jsx)(ce,{genreID:b,getGenreList:g,setDisplayGenrePopupForDelete:y})]})]})},ue=n(24),le=n(14),de=n.n(le),pe=function(e){var t=Object(a.useState)(!1),n=Object(i.a)(t,2),r=n[0],c=n[1];return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("div",{className:de.a.navbarHeader,children:[Object(h.jsx)(ue.a,{className:de.a.fabars,size:"1.5rem",onClick:function(){e.setDisplayNavbar(!0)}}),Object(h.jsxs)("div",{className:de.a.searchDiv,children:[Object(h.jsx)("form",{onSubmit:function(e){e.preventDefault()},children:Object(h.jsx)("input",{className:"".concat(de.a.searchDiv_form_input," ").concat(r&&de.a.show_search_bar),type:"text",name:"searchTextInput",onChange:function(t){e.setSearchText(t.target.value)}})}),Object(h.jsx)(ue.b,{id:de.a.fasearchIcon,size:"1.5rem",onClick:function(){c(!r)}})]})]})})},je=n(32),be=n(18),he=n.n(be),Oe=function(e){function t(){return(t=Object(s.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("users/logout",{method:"POST"});case 2:t.sent,e.setDisplayNavbar(!1),e.setIsLoggedIn(!1);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(h.jsxs)("div",{className:"".concat(he.a.navbar," ").concat(e.displayNavbar&&he.a.displayNavbar),children:[Object(h.jsx)(je.a,{className:he.a.closeXButton,size:"1.5rem",onClick:function(){e.setDisplayNavbar(!1)}}),Object(h.jsxs)("ul",{children:[Object(h.jsx)("p",{onClick:function(){e.displayBookComponentFunction(),e.setDisplayNavbar(!1)},children:"Books"}),Object(h.jsx)("p",{onClick:function(){e.displayAuthorComponentFunction(),e.setDisplayNavbar(!1)},children:"Authors"}),Object(h.jsx)("p",{onClick:function(){e.displayGenreComponentFunction(),e.setDisplayNavbar(!1)},children:"Genres"})]}),Object(h.jsx)("div",{id:he.a.bottom_div,children:Object(h.jsx)("p",{onClick:function(){return t.apply(this,arguments)},children:"Logout"})})]})},me=n(19),fe=n.n(me),xe=function(e){var t=Object(a.useState)(),n=Object(i.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(),u=Object(i.a)(o,2),d=u[0],p=u[1],j=Object(a.useState)(),b=Object(i.a)(j,2),O=b[0],m=b[1],f=Object(a.useState)(!1),x=Object(i.a)(f,2),_=x[0],y=x[1];function v(){return(v=Object(s.a)(l.a.mark((function t(n){var a,c,o,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),a={loginUsername:r,loginPassword:d},r&&(a=Object(J.a)(Object(J.a)({},a),{},{escapedUsername:r.replaceAll("'","\\'")})),t.next=5,fetch("users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 5:return c=t.sent,t.next=8,c.json();case 8:"object"===typeof(o=t.sent)&&(o.hasOwnProperty("errors")?(y(!0),s=o.errors.map((function(e){return e.msg})),m((function(){return s.map((function(e){return Object(h.jsx)("li",{children:e})}))}))):(e.sendLoggedInUserToApp(o),e.setIsLoggedIn(!0)));case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(h.jsx)("div",{className:fe.a.popup,"data-cy":"login_component",children:Object(h.jsxs)("div",{className:fe.a.popup_inner,children:[_&&Object(h.jsx)("ul",{children:O}),Object(h.jsx)("p",{children:"Please log in below"}),Object(h.jsxs)("form",{className:fe.a.form,onSubmit:function(e){return v.apply(this,arguments)},children:[Object(h.jsxs)("label",{children:["Username",Object(h.jsx)("input",{type:"text",name:"newuserUsername",value:r,onChange:function(e){c(e.target.value)}})]}),Object(h.jsxs)("label",{children:["Password",Object(h.jsx)("input",{type:"password",name:"newUserPassword",value:d,onChange:function(e){p(e.target.value)}})]}),Object(h.jsx)("div",{id:fe.a.button_div,children:Object(h.jsx)("button",{type:"submit",children:"Login"})})]}),Object(h.jsx)("a",{onClick:function(){e.setIsNewUser(!0)},children:"Create New User"})]})})},_e=n(15),ye=n.n(_e),ve=function(e){var t=Object(a.useState)(),n=Object(i.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(),u=Object(i.a)(o,2),d=u[0],p=u[1],j=Object(a.useState)(),b=Object(i.a)(j,2),O=b[0],m=b[1],f=Object(a.useState)(),x=Object(i.a)(f,2),_=x[0],y=x[1],v=Object(a.useState)(),g=Object(i.a)(v,2),k=g[0],w=g[1],D=Object(a.useState)(),N=Object(i.a)(D,2),C=N[0],S=N[1],E=Object(a.useState)(),I=Object(i.a)(E,2),A=I[0],B=I[1],L=Object(a.useState)(!1),F=Object(i.a)(L,2),T=F[0],P=F[1],U=Object(a.useState)("password"),G=Object(i.a)(U,2),z=G[0],H=G[1],W=Object(a.useState)(!1),q=Object(i.a)(W,2),M=q[0],X=q[1];function Q(){return(Q=Object(s.a)(l.a.mark((function t(n){var a,c,o,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),a={newUserFirstName:r,newUserLastName:d,newUserEmail:O,newUserUsername:_,newUserPassword:k,newUserConfirmedPassword:C},r&&(a=Object(J.a)(Object(J.a)({},a),{},{replacedNewUserFirstName:r.replaceAll("'","\\'")})),d&&(a=Object(J.a)(Object(J.a)({},a),{},{replacedNewUserLastName:d.replaceAll("'","\\'")})),O&&(a=Object(J.a)(Object(J.a)({},a),{},{replacedNewUserEmail:O.replaceAll("'","\\'")})),_&&(a=Object(J.a)(Object(J.a)({},a),{},{replacedNewUserUsername:_.replaceAll("'","\\'")})),t.next=8,fetch("users/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 8:return c=t.sent,t.next=11,c.json();case 11:"object"===typeof(o=t.sent)&&(o.hasOwnProperty("errors")?(X(!0),(s=o.errors.map((function(e){return e.msg}))).indexOf("SequelizeUniqueConstraintError")>=0&&(s.pop(),"username"===o.errors[0].type&&s.push("That username already exists in the database. Please pick a different username."),"email"===o.errors[0].type&&s.push("That email already exists in the database. Please pick a different email.")),B((function(){return s.map((function(e){return Object(h.jsx)("li",{children:e})}))}))):(P(!0),setTimeout((function(){e.setIsNewUser(!1)}),3e3)));case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(h.jsxs)("div",{className:ye.a.popup,children:[!T&&Object(h.jsxs)("div",{className:ye.a.popup_inner,children:[M&&Object(h.jsx)("ul",{children:A}),Object(h.jsx)("p",{children:"Please enter your information below:"}),Object(h.jsxs)("form",{className:ye.a.form,onSubmit:function(e){return Q.apply(this,arguments)},children:[Object(h.jsxs)("label",{children:["First Name",Object(h.jsx)("input",{type:"text",name:"newuserFirstName",onChange:function(e){c(e.target.value)},value:r})]}),Object(h.jsxs)("label",{children:["Last Name",Object(h.jsx)("input",{type:"text",name:"newUserLastName",onChange:function(e){p(e.target.value)},value:d})]}),Object(h.jsxs)("label",{children:["Email",Object(h.jsx)("input",{type:"text",name:"newUserEmail",onChange:function(e){m(e.target.value)},value:O})]}),Object(h.jsxs)("label",{children:["Username",Object(h.jsx)("input",{type:"text",name:"newuserUsername",onChange:function(e){y(e.target.value)},value:_})]}),Object(h.jsxs)("label",{children:["Password",Object(h.jsx)("input",{type:z,name:"newUserPassword",onChange:function(e){w(e.target.value)},value:k})]}),Object(h.jsxs)("label",{children:["Confirm Password",Object(h.jsx)("input",{type:z,name:"newUserConfirmedPassword",onChange:function(e){S(e.target.value)},value:C})]}),Object(h.jsxs)("div",{id:ye.a.show_password_checkbox,children:[Object(h.jsx)("input",{type:"checkbox",id:"showPasswordID",name:"showPasswordName",onChange:function(){H("password"===z?"text":"password")}}),Object(h.jsx)("label",{for:"showPasswordID",children:"Show Password"})]}),Object(h.jsx)("div",{id:ye.a.button_div,children:Object(h.jsx)("button",{type:"submit",children:"Create User"})})]}),Object(h.jsx)("a",{onClick:function(){e.setIsNewUser(!1)},children:"Back to Login"})]}),T&&Object(h.jsx)("div",{className:ye.a.popup_inner,children:Object(h.jsx)("p",{"data-cy":"new_user_created",children:"New user created. Redirecting to login page..."})})]})};var ge=function(){var e=Object(a.useState)(!0),t=Object(i.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(!1),o=Object(i.a)(c,2),u=o[0],d=o[1],j=Object(a.useState)(!1),b=Object(i.a)(j,2),O=b[0],m=b[1],f=Object(a.useState)(!1),x=Object(i.a)(f,2),y=x[0],v=x[1],g=Object(a.useState)(!1),k=Object(i.a)(g,2),w=k[0],D=k[1],N=Object(a.useState)(!1),C=Object(i.a)(N,2),S=C[0],E=C[1],I=Object(a.useState)(!1),A=Object(i.a)(I,2),B=A[0],L=A[1],F=Object(a.useState)(),T=Object(i.a)(F,2),P=T[0],U=T[1],G=Object(a.useState)(),z=Object(i.a)(G,2),J=z[0],W=z[1];function q(){return(q=Object(s.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("users/checkcookies",{method:"POST"});case 2:return t=e.sent,e.next=5,t.json();case 5:(n=e.sent).hasOwnProperty("success")&&(U(n.token),E(!0));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){!function(){q.apply(this,arguments)}()}),[]),Object(h.jsxs)("div",{className:p.a.appClass,children:[!S&&!w&&Object(h.jsx)("div",{children:Object(h.jsx)(xe,{setIsNewUser:D,setIsLoggedIn:E,sendLoggedInUserToApp:function(e){var t=e.accessToken;U(t)}})}),!S&&w&&Object(h.jsx)(ve,{setIsNewUser:D}),S&&Object(h.jsx)("div",{children:Object(h.jsxs)(_.Provider,{value:{token:P,setIsLoggedIn:E,searchText:J},children:[Object(h.jsx)(pe,{setDisplayNavbar:v,setSearchText:W}),Object(h.jsx)(Oe,{displayNavbar:y,setDisplayNavbar:v,displayBookComponentFunction:function(){r(!0),d(!1),m(!1),L(!1)},displayAuthorComponentFunction:function(){r(!1),d(!0),m(!1),L(!1)},displayGenreComponentFunction:function(){r(!1),d(!1),m(!0),L(!1)},displayUserInfoComponentFunction:function(){r(!1),d(!1),m(!1),L(!0)},setIsLoggedIn:E}),n&&!u&&!O&&!B&&Object(h.jsx)(H,{}),!n&&u&&!O&&!B&&Object(h.jsx)(Z,{}),!n&&!u&&O&&!B&&Object(h.jsx)(ie,{})]})})]})},ke=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,44)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),c(e),o(e)}))};o.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(ge,{})}),document.getElementById("root")),ke()}],[[43,1,2]]]);
//# sourceMappingURL=main.7363adbc.chunk.js.map